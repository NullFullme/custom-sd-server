(function(){"use strict";var e={422:function(e,t,a){var i=a(7195),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("HomeView")],1)},n=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("header",{staticClass:"home-header"},[e._m(0),t("div",{staticClass:"header-right"},[t("div",{staticClass:"user-account"},[t("img",{staticClass:"user-avatar",attrs:{src:e.userInfo.userAvatar,alt:""}}),t("p",{staticClass:"user-name"},[e._v(e._s(e.userInfo.name))])]),t("div",{staticClass:"setting",on:{click:function(t){e.dialogVisible=!0}}},[t("i",{staticClass:"el-icon-s-grid"})])])]),t("main",{staticClass:"home-main"},[t("div",{staticClass:"img2img-setting-container"},[t("el-form",{attrs:{size:"medium","label-width":"80px","label-position":"left"}},[t("el-col",{attrs:{lg:6,md:8,sm:10,xs:20,offset:1}},[t("el-form-item",{attrs:{label:"Mode"}},[t("el-select",{style:{width:"100%"},attrs:{"popper-append-to-body":!1,placeholder:"Please select model"},on:{"visible-change":e.handleRefreshMode},model:{value:e.modeSetting.mode,callback:function(t){e.$set(e.modeSetting,"mode",t)},expression:"modeSetting.mode"}},e._l(e.modeChoiceCheckPointOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e.title,value:e.title}})})),1)],1)],1),t("el-col",{attrs:{lg:6,md:7,sm:8,xs:22,offset:1}},[t("ul",{staticClass:"form-radio-btn mode-btn-container"},e._l(e.modeGenerateTypeOptions,(function(a,i){return t("li",{key:i,staticClass:"form-radio-item-btn",class:{"select-btn":e.modeSetting.generateType===a.value},on:{click:function(t){return e.handleChangeGenerateType(a.value)}}},[e._v(" "+e._s(a.label)+" ")])})),0)]),t("el-col",{attrs:{lg:17,md:17,sm:17,xs:20,offset:1}},[t("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"Prompt"}},[t("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:"Enter prompt here:1girl, red hair, green eyes, light particles, light rays, wallpaper, high contrast, colorful,",autosize:{minRows:4,maxRows:4},resize:"none"},model:{value:e.modeSetting.prompt,callback:function(t){e.$set(e.modeSetting,"prompt",t)},expression:"modeSetting.prompt"}}),t("div",{staticClass:"presuppose-container"},[t("el-select",{staticClass:"presuppose-select",attrs:{"popper-append-to-body":!1,placeholder:"Style",clearable:!0},on:{change:e.handleChangePresupposePrompt},model:{value:e.choicePromptStyle.style_name,callback:function(t){e.$set(e.choicePromptStyle,"style_name",t)},expression:"choicePromptStyle.style_name"}},e._l(e.modeChoicePromptOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e.style_name,value:e.style_name}})})),1),t("img",{staticClass:"presuppose-save-icon",attrs:{src:a(7181),alt:""},on:{click:e.handleSavePresuppose}})],1)],1)],1),t("el-col",{attrs:{sm:4,xs:{span:11,offset:1},offset:1}},[t("el-form-item",{staticClass:"form-item-variations",attrs:{label:"Variations"}},[t("el-select",{style:{width:"100%"},attrs:{"popper-append-to-body":!1,placeholder:"Please select batch size"},model:{value:e.modeSetting.batchSize,callback:function(t){e.$set(e.modeSetting,"batchSize",t)},expression:"modeSetting.batchSize"}},e._l(e.modeVariationsOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1)],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.isThisTypeGenerating,expression:"!isThisTypeGenerating"}],attrs:{sm:4,xs:{span:8,offset:1},offset:1}},[t("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.handleGenerate}},[e._v(" Generate ")])],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.isThisTypeGenerating,expression:"isThisTypeGenerating"}],attrs:{sm:4,xs:{span:8,offset:1},offset:1}},[t("el-button",{attrs:{type:"info",size:"medium"},on:{click:e.handleInterruptGenerate}},[e._v(" Interrupt ")]),t("el-button",{attrs:{type:"info",size:"medium"},on:{click:e.handleSkipGenerate}},[e._v(" Skip ")])],1),e.isEnableCustomized?t("el-col",{attrs:{span:17,xs:20,offset:1}},[t("el-form-item",{staticClass:"form-item-customized",attrs:{label:"Customized style"}},[t("ul",{staticClass:"form-radio-btn"},e._l(e.modeChoiceCustomizedOptions,(function(a,i){return t("li",{key:i,staticClass:"form-radio-item-btn",on:{click:function(t){return e.handleChangeCustomizedStyle(a.name)}}},[e._v(" "+e._s(a.name)+" ")])})),0)])],1):e._e()],1)],1),t("div",{staticClass:"img2img-generate-container"},[t("el-col",{attrs:{sm:11,xs:22,offset:1}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isUseSketch,expression:"isUseSketch"}],staticClass:"upload-container"},[t("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.generateData.txt2img.isShowUpload,expression:"generateData.txt2img.isShowUpload"}],staticClass:"el-upload-container",attrs:{drag:"",multiple:!1,"show-file-list":!1,"list-type":"picture",action:"",accept:".jpg,.jpeg,.png,.webp","before-upload":e.beforeUpload,"http-request":e.handleUpload}},[t("i",{staticClass:"el-icon-plus"}),t("div",{staticClass:"el-upload-text"},[e._v(" Drop file here OR"),t("em",[e._v(" Click to upload")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.generateData.txt2img.isShowUpload&&e.generateData.txt2img.isActivated,expression:"\n              !generateData.txt2img.isShowUpload &&\n              generateData.txt2img.isActivated\n            "}],staticClass:"upload-image-container"},[t("div",{staticClass:"upload-image-left-container"},[t("i",{staticClass:"el-icon-picture-outline"}),t("p",[e._v("image")])]),t("div",{staticClass:"upload-image-right-container"},[t("div",{staticClass:"image-top-btn"},[t("div",{staticClass:"image-icon-btn",on:{click:function(t){return e.handleCloseImage("txt2img")}}},[t("i",{staticClass:"el-icon-close"})])])]),t("div",{staticClass:"upload-image"},[t("div",{staticClass:"image-container"},[t("img",{attrs:{src:e.generateData.txt2img.uploadImageUrl,alt:""}})])])]),t("div",{staticClass:"image-setting-container"},[t("div",[t("el-slider",{attrs:{min:-1,max:1,step:1,"show-tooltip":!1},model:{value:e.generateData.txt2img.controlModeIndex,callback:function(t){e.$set(e.generateData.txt2img,"controlModeIndex",t)},expression:"generateData.txt2img.controlModeIndex"}}),t("div",{staticClass:"setting-slide-container"},[t("p",[e._v("Prompt is more important")]),t("p",[e._v("Balanced")]),t("p",[e._v("Sketch is more important")])])],1)])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isUseInpaint,expression:"isUseInpaint"}],staticClass:"upload-container"},[t("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.generateData.inpaint.isShowUpload,expression:"generateData.inpaint.isShowUpload"}],staticClass:"el-upload-container",attrs:{drag:"",multiple:!1,"show-file-list":!1,"list-type":"picture",action:"",accept:".jpg,.jpeg,.png,.webp","before-upload":e.beforeUpload,"http-request":e.handleUpload}},[t("i",{staticClass:"el-icon-plus"}),t("div",{staticClass:"el-upload-text"},[e._v(" Drop file here OR"),t("em",[e._v(" Click to upload")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.generateData.inpaint.isShowUpload&&e.generateData.inpaint.isActivated,expression:"\n              !generateData.inpaint.isShowUpload &&\n              generateData.inpaint.isActivated\n            "}],staticClass:"upload-image-container"},[t("div",{staticClass:"upload-image-left-container"},[t("i",{staticClass:"el-icon-picture-outline"}),t("p",[e._v("image")])]),t("div",{staticClass:"upload-image-right-container"},[t("div",{staticClass:"image-top-btn"},[t("div",{staticClass:"image-icon-btn",on:{click:e.handleRefreshImage}},[t("i",{staticClass:"el-icon-refresh-left"})]),t("div",{staticClass:"image-icon-btn",on:{click:e.handleClearInpaint}},[t("img",{attrs:{src:a(4666),alt:""}})]),t("div",{staticClass:"image-icon-btn",on:{click:function(t){return e.handleCloseImage("inpaint")}}},[t("i",{staticClass:"el-icon-close"})])]),t("div",{staticClass:"image-icon-btn",on:{click:e.handleToggleBrushSize}},[t("img",{attrs:{src:a(815),alt:""}}),e.isShowBrushSize?t("el-slider",{staticClass:"brush-slide",attrs:{min:1,max:80},model:{value:e.brushSize,callback:function(t){e.brushSize=t},expression:"brushSize"}}):e._e()],1)]),t("div",{staticClass:"upload-image"},[t("div",{staticClass:"image-container"},[t("canvas",{attrs:{id:"canvas"}}),t("img",{staticClass:"inpaint-image",attrs:{src:e.generateData.inpaint.uploadImageUrl,alt:"",id:"image"},on:{load:e.handleImgOnload}}),t("div",{ref:"brush",staticClass:"brush-circle",style:{width:`${e.brushSize}px`,height:`${e.brushSize}px`}})])])]),t("div",{staticClass:"image-setting-container"},[t("div",[t("el-slider",{attrs:{min:0,max:1,step:.01,"show-tooltip":!1},model:{value:e.generateData.inpaint.repaintStrength,callback:function(t){e.$set(e.generateData.inpaint,"repaintStrength",t)},expression:"generateData.inpaint.repaintStrength"}}),t("div",{staticClass:"setting-slide-inpaint"},[t("p",[e._v("Repaint strength")]),t("el-input-number",{attrs:{min:0,max:1,controls:!1,size:"small"},model:{value:e.generateData.inpaint.repaintStrength,callback:function(t){e.$set(e.generateData.inpaint,"repaintStrength",t)},expression:"generateData.inpaint.repaintStrength"}})],1)],1)])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isUseRendering,expression:"isUseRendering"}],staticClass:"upload-container"},[t("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.generateData.img2img.isShowUpload,expression:"generateData.img2img.isShowUpload"}],staticClass:"el-upload-container",attrs:{drag:"",multiple:!1,"show-file-list":!1,"list-type":"picture",action:"",accept:".jpg,.jpeg,.png,.webp","before-upload":e.beforeUpload,"http-request":e.handleUpload}},[t("i",{staticClass:"el-icon-plus"}),t("div",{staticClass:"el-upload-text"},[e._v(" Drop file here OR Click to upload ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.generateData.img2img.isShowUpload&&e.generateData.img2img.isActivated,expression:"\n              !generateData.img2img.isShowUpload &&\n              generateData.img2img.isActivated\n            "}],staticClass:"upload-image-container"},[t("div",{staticClass:"upload-image-left-container"},[t("i",{staticClass:"el-icon-picture-outline"}),t("p",[e._v("image")])]),t("div",{staticClass:"upload-image-right-container"},[t("div",{staticClass:"image-top-btn"},[t("div",{staticClass:"image-icon-btn",on:{click:function(t){return e.handleCloseImage("img2img")}}},[t("i",{staticClass:"el-icon-close"})])])]),t("div",{staticClass:"upload-image"},[t("div",{staticClass:"image-container"},[t("img",{attrs:{src:e.generateData.img2img.uploadImageUrl,alt:""}})])])]),t("div",{staticClass:"image-setting-container"},[t("div",[t("el-slider",{attrs:{min:-1,max:1,step:1,"show-tooltip":!1},model:{value:e.generateData.img2img.controlModeIndex,callback:function(t){e.$set(e.generateData.img2img,"controlModeIndex",t)},expression:"generateData.img2img.controlModeIndex"}}),t("div",{staticClass:"setting-slide-container"},[t("p",[e._v("Prompt is more important")]),t("p",[e._v("Balanced")]),t("p",[e._v("Base is more important")])])],1)])],1)]),t("el-col",{attrs:{sm:11,xs:{span:22,offset:1}}},[t("div",{staticClass:"result-container"},[t("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.isUseSketch&&e.generateData.txt2img.isGenerating,expression:"isUseSketch && generateData.txt2img.isGenerating"}],attrs:{type:"line","text-inside":!0,"stroke-width":20,percentage:e.generateData.txt2img.generateProgress,color:"#A76061","define-back-color":"#1f2936","text-color":"#ffffff"}}),t("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.isUseInpaint&&e.generateData.inpaint.isGenerating,expression:"isUseInpaint && generateData.inpaint.isGenerating"}],attrs:{type:"line","text-inside":!0,"stroke-width":20,percentage:e.generateData.inpaint.generateProgress,color:"#A76061","define-back-color":"#1f2936","text-color":"#ffffff"}}),t("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.isUseRendering&&e.generateData.img2img.isGenerating,expression:"isUseRendering && generateData.img2img.isGenerating"}],attrs:{type:"line","text-inside":!0,"stroke-width":20,percentage:e.generateData.img2img.generateProgress,color:"#A76061","define-back-color":"#1f2936","text-color":"#ffffff"}}),e.showViewer?t("el-image-viewer",{attrs:{"url-list":e.preViewImgList,initialIndex:e.preViewImgIndex,"on-close":e.closeViewer}}):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isUseSketch,expression:"isUseSketch"}],staticClass:"result-carousel-container"},[e.generateData.txt2img.isShowCarousel?t("div",{staticStyle:{height:"100%"}},[t("div",{staticClass:"image-icon-btn carousel-close-btn",on:{click:function(t){return e.handleCloseCarousel("txt2img")}}},[t("i",{staticClass:"el-icon-close"})]),t("b-carousel",{attrs:{"indicator-inside":!1,autoplay:!1,animated:"fade"},scopedSlots:e._u([{key:"indicators",fn:function(a){return[t("b-image",{staticClass:"image-indicator",attrs:{src:e.generateData.txt2img.generateImageList[a.i].imgUrl,title:a.i}})]}}]),model:{value:e.generateData.txt2img.generateCarouselIndex,callback:function(t){e.$set(e.generateData.txt2img,"generateCarouselIndex",t)},expression:"generateData.txt2img.generateCarouselIndex"}},e._l(e.generateData.txt2img.generateImageList,(function(a,i){return t("b-carousel-item",{key:i,on:{click:function(t){return e.handlePreViewImg(i)}}},[t("b-image",{staticClass:"image-item",attrs:{src:a.imgUrl}})],1)})),1)],1):t("div",{staticClass:"result-list-container"},e._l(e.generateData.txt2img.generateImageList,(function(a,i){return t("img",{key:i,staticClass:"result-img-item",attrs:{src:a.imgUrl,alt:""},on:{click:function(t){return e.handleClickGenerateImage(i,"txt2img")}}})})),0)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isUseInpaint,expression:"isUseInpaint"}],staticClass:"result-carousel-container"},[e.generateData.inpaint.isShowCarousel?t("div",{staticStyle:{height:"100%"}},[t("div",{staticClass:"image-icon-btn carousel-close-btn",on:{click:function(t){return e.handleCloseCarousel("inpaint")}}},[t("i",{staticClass:"el-icon-close"})]),t("b-carousel",{attrs:{"indicator-inside":!1,autoplay:!1,animated:"fade"},scopedSlots:e._u([{key:"indicators",fn:function(a){return[t("b-image",{staticClass:"image-indicator",attrs:{src:e.generateData.inpaint.generateImageList[a.i].imgUrl,title:a.i}})]}}]),model:{value:e.generateData.inpaint.generateCarouselIndex,callback:function(t){e.$set(e.generateData.inpaint,"generateCarouselIndex",t)},expression:"generateData.inpaint.generateCarouselIndex"}},e._l(e.generateData.inpaint.generateImageList,(function(a,i){return t("b-carousel-item",{key:i,on:{click:function(t){return e.handlePreViewImg(i)}}},[t("b-image",{staticClass:"image-item",attrs:{src:a.imgUrl}})],1)})),1)],1):t("div",{staticClass:"result-list-container"},e._l(e.generateData.inpaint.generateImageList,(function(a,i){return t("img",{key:i,staticClass:"result-img-item",attrs:{src:a.imgUrl,alt:""},on:{click:function(t){return e.handleClickGenerateImage(i,"inpaint")}}})})),0)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isUseRendering,expression:"isUseRendering"}],staticClass:"result-carousel-container"},[e.generateData.img2img.isShowCarousel?t("div",{staticStyle:{height:"100%"}},[t("div",{staticClass:"image-icon-btn carousel-close-btn",on:{click:function(t){return e.handleCloseCarousel("img2img")}}},[t("i",{staticClass:"el-icon-close"})]),t("b-carousel",{attrs:{"indicator-inside":!1,autoplay:!1,animated:"fade"},scopedSlots:e._u([{key:"indicators",fn:function(a){return[t("b-image",{staticClass:"image-indicator",attrs:{src:e.generateData.img2img.generateImageList[a.i].imgUrl,title:a.i}})]}}]),model:{value:e.generateData.img2img.generateCarouselIndex,callback:function(t){e.$set(e.generateData.img2img,"generateCarouselIndex",t)},expression:"generateData.img2img.generateCarouselIndex"}},e._l(e.generateData.img2img.generateImageList,(function(a,i){return t("b-carousel-item",{key:i,on:{click:function(t){return e.handlePreViewImg(i)}}},[t("b-image",{staticClass:"image-item",attrs:{src:a.imgUrl}})],1)})),1)],1):t("div",{staticClass:"result-list-container"},e._l(e.generateData.img2img.generateImageList,(function(a,i){return t("img",{key:i,staticClass:"result-img-item",attrs:{src:a.imgUrl,alt:""},on:{click:function(t){return e.handleClickGenerateImage(i,"img2img")}}})})),0)]),t("div",{staticClass:"result-btn-container"},[t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"info",size:"small"},on:{click:e.handleSentSave}},[e._v(" Save ")])],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.handleSentFaceliftOrRendering("inpaint")}}},[e._v(" Sent to Facelift ")])],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.handleSentFaceliftOrRendering("img2img")}}},[e._v(" Sent to Rendering ")])],1)],1)],1)])],1)]),t("el-dialog",{attrs:{top:"60px",visible:e.dialogVisible,title:"Setting","append-to-body":!1,"before-close":e.handleCloseDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activeDialogTab,callback:function(t){e.activeDialogTab=t},expression:"activeDialogTab"}},[t("el-tab-pane",{attrs:{label:"My account",name:"1",disabled:""}},[e._v(" My account ")]),t("el-tab-pane",{attrs:{label:"Customized style",name:"2"}},[t("div",{staticClass:"customized-isEnable-container",class:{"is-checked":e.isEnableCustomized}},[t("span",{staticClass:"radio-btn",on:{click:e.handleToggleEnableCustomized}}),t("p",{on:{click:e.handleToggleEnableCustomized}},[e._v("enable")]),t("a",{attrs:{href:"https://married-cost-c24.notion.site/The-tutorial-of-training-your-own-design-style-71884de18e6941fb9c6ae347d8694d0b?pvs=4",target:"_blank"}},[e._v(" Learn how to create your style ")])]),t("ul",{staticClass:"form-radio-btn setting-content-wrap"},[e._l(e.modeChoiceCustomizedOptions,(function(a,i){return t("li",{key:i,staticClass:"form-radio-item-btn",class:{"is-disabled":!e.isEnableCustomized,"select-btn":e.dialogModeConfig.modeCustomized===a.name},on:{click:function(t){return e.handleSelectCustomized(a.name)}}},[e._v(" "+e._s(a.name)+" ")])})),t("li",{staticClass:"form-radio-item-btn",on:{click:function(t){e.isCreateCustomized=!0}}},[t("i",{staticClass:"el-icon-plus"})])],2),e.isCreateCustomized?t("div",{staticClass:"form-create-container"},[t("el-col",{attrs:{lg:17,md:17,sm:17,xs:20}},[t("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.isUploadLoading,expression:"isUploadLoading"}],staticClass:"upload-lora-container",attrs:{drag:"","show-file-list":!1,action:"","http-request":e.handleUploadCustomizedStyle,accept:".safetensors","element-loading-text":"Loading…","element-loading-spinner":"el-icon-loading","element-loading-background":"#282E34"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v(" Drop file here OR"),t("em",[e._v(" Click to upload")])])])],1)],1):e._e()]),t("el-tab-pane",{attrs:{label:"Mode",name:"3"}},[t("ul",{staticClass:"form-radio-btn setting-content-wrap"},e._l(e.modeChoiceCheckPointOptions,(function(a,i){return t("li",{key:i,staticClass:"form-radio-item-btn",class:{"select-btn":e.dialogModeConfig.modeCheckPoint===a.title},on:{click:function(t){return e.handleSelectCheckPoint(a.title)}}},[e._v(" "+e._s(a.title)+" ")])})),0)]),t("el-tab-pane",{attrs:{label:"Method",name:"4"}},[t("p",{staticClass:"method-panel-title"},[e._v("Sampling method")]),t("br"),t("div",{staticClass:"method-panel-container"},e._l(e.modeChoiceMethodOptions,(function(a,i){return t("el-radio",{key:i,attrs:{label:a.value},model:{value:e.modeSetting.samplerMethod,callback:function(t){e.$set(e.modeSetting,"samplerMethod",t)},expression:"modeSetting.samplerMethod"}},[e._v(" "+e._s(a.label)+" "),a.labelSuffix?t("span",{staticClass:"method-item-suffix"},[e._v(e._s(a.labelSuffix))]):e._e()])})),1)]),t("el-tab-pane",{attrs:{label:"Resolution",name:"5"}},e._l(e.modeChoiceResolutionOptions,(function(a,i){return t("el-radio",{key:i,attrs:{label:a.label},model:{value:e.modeSetting.resolution,callback:function(t){e.$set(e.modeSetting,"resolution",t)},expression:"modeSetting.resolution"}},[e._v(" "+e._s(a.label)+" ")])})),1),t("el-tab-pane",{attrs:{label:"Prompt Preset",name:"6"}},[t("div",{staticClass:"setting-prompt-container"},[e._l(e.modeChoicePromptOptions,(function(a,i){return t("div",{key:i,staticClass:"prompt-item"},[t("div",{staticClass:"prompt-item-header"},[t("el-input",{staticClass:"item-title",attrs:{placeholder:"Please enter the prompt preset name",disabled:a.isDisabled},model:{value:a.style_name,callback:function(t){e.$set(a,"style_name",t)},expression:"item.style_name"}}),t("i",{staticClass:"el-icon-close icon-btn",on:{click:function(t){return e.handleDeletePrompt(i)}}}),a.isDisabled?t("i",{staticClass:"el-icon-edit icon-btn",staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.handleEditPrompt(i)}}}):t("p",{staticStyle:{"margin-left":"20px"}},[t("i",{staticClass:"el-icon-refresh-left icon-btn",on:{click:function(t){return e.handleEditPrompt(i)}}}),t("i",{staticClass:"el-icon-check icon-btn",staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.handleSubmitEditPrompt(a,i)}}})])],1),t("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:"Please enter prompt here",autosize:{minRows:3,maxRows:3},resize:"none",disabled:a.isDisabled},model:{value:a.prompt_text,callback:function(t){e.$set(a,"prompt_text",t)},expression:"item.prompt_text"}}),t("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:"Please enter negative prompt here",autosize:{minRows:3,maxRows:3},resize:"none",disabled:a.isDisabled},model:{value:a.negative_prompt_text,callback:function(t){e.$set(a,"negative_prompt_text",t)},expression:"item.negative_prompt_text"}})],1)})),e.isCreatePrompt?t("div",{staticClass:"prompt-item"},[t("div",{staticClass:"prompt-item-header"},[t("el-input",{staticClass:"item-title",attrs:{placeholder:"Please enter the prompt preset name"},model:{value:e.dialogModeConfig.modePrompt.style_name,callback:function(t){e.$set(e.dialogModeConfig.modePrompt,"style_name",t)},expression:"dialogModeConfig.modePrompt.style_name"}}),t("i",{staticClass:"el-icon-close icon-btn",on:{click:e.handleCancelCreatePrompt}})],1),t("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:"Please enter prompt here",autosize:{minRows:3,maxRows:3},resize:"none"},model:{value:e.dialogModeConfig.modePrompt.prompt_text,callback:function(t){e.$set(e.dialogModeConfig.modePrompt,"prompt_text",t)},expression:"dialogModeConfig.modePrompt.prompt_text"}}),t("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:"Please enter negative prompt here",autosize:{minRows:3,maxRows:3},resize:"none"},model:{value:e.dialogModeConfig.modePrompt.negative_prompt_text,callback:function(t){e.$set(e.dialogModeConfig.modePrompt,"negative_prompt_text",t)},expression:"dialogModeConfig.modePrompt.negative_prompt_text"}})],1):e._e()],2),t("div",{staticClass:"setting-prompt-create"},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.isCreatePrompt,expression:"!isCreatePrompt"}],staticClass:"el-icon-plus icon-btn create-btn",on:{click:e.handleCreatePrompt}}),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isCreatePrompt,expression:"isCreatePrompt"}],staticClass:"icon-btn create-btn",on:{click:e.handleSavePrompt}},[e._v(" Save ")])])])],1)],1)],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header-left"},[t("img",{staticClass:"logo-img",attrs:{src:a(4427),alt:""}}),t("p",{staticClass:"logo-text"},[e._v("AUTOMOTIVE DESIGN COPILOT (BETA)")])])}],l=(a(7658),a(2801),a(1439),a(7585),a(5315),a(8089)),c=a(306),d=a(5114),m=a.n(d);const g=c.Z.create({baseURL:"/sdapi",timeout:6e5});g.interceptors.request.use((e=>{let{isFormData:t,method:a}=e;return e.headers["Content-type"]="application/json","post"===a&&t&&(e.headers["Content-type"]="multipart/form-data"),e}),(e=>{Promise.reject(e)})),g.interceptors.response.use((e=>Promise.resolve(e.data)),(e=>{if(console.log("错误信息",e),e.response.status)switch(e.response.status){case 404:(0,d.Message)({type:"error",message:"The request path cannot be found!",showClose:!0});break;case 500:(0,d.Message)({type:"error",message:"Internal server error!",showClose:!0});break;default:break}return Promise.reject(new Error(e.message))}));var h=g;function p(e){return h({url:"/v1/txt2img",method:"post",data:e,isFormData:!1})}function u(e){return h({url:"/v1/img2img",method:"post",data:e,isFormData:!1})}function f(){return h({url:"/v1/interrupt",method:"post",isFormData:!1})}function v(){return h({url:"/v1/skip",method:"post",isFormData:!1})}function C(e){return h({url:"/v1/progress",method:"post",data:e,isFormData:!1})}function w(){return h({url:"/v1/sd-models",method:"get"})}function b(){return h({url:"/v1/refresh-checkpoints",method:"post"})}function x(){return h({url:"/v1/loras",method:"get"})}function y(e){return h({url:"/v1/upload_lora",method:"post",data:e,isFormData:!0})}function S(){return h({url:"/custom/style_list",method:"get"})}function k(e){return h({url:"/custom/style_add",method:"post",data:e,isFormData:!1})}function _(e){return h({url:"/custom/style_edit",method:"post",data:e,isFormData:!1})}function D(e){return h({url:"/custom/style_del",method:"delete",data:e,isFormData:!1})}const P=a(1552),I=a(7328).v4;var M={components:{ElImageViewer:l.Z},data(){return{userInfo:{id:1,name:"DEMO TEST",userAvatar:a(9647)},choicePromptStyle:{style_name:"",prompt_text:"",negative_prompt_text:""},modeSetting:{mode:P.default.mode,generateType:P.default.generateType,prompt:P.default.prompt,batchSize:P.default.batchSize,samplerMethod:P.default.samplerMethod,resolution:P.default.resolution,controlModeIndex:P.controlMode,repaintStrength:P.default.denoisingStrength},generateData:{txt2img:{uploadImageUrl:"",controlModeIndex:P.default.controlMode,isShowUpload:!0,isActivated:!0,isGenerating:!1,isSkipped:!1,progressTimer:null,generateTaskId:"",generateProgress:0,generateImageList:[],generateCarouselIndex:0,isShowCarousel:!1},inpaint:{uploadImageUrl:"",repaintStrength:P.default.denoisingStrength,isShowUpload:!0,isActivated:!1,isGenerating:!1,isSkipped:!1,progressTimer:null,generateTaskId:"",generateProgress:0,generateImageList:[],generateCarouselIndex:0,isShowCarousel:!1},img2img:{uploadImageUrl:"",controlModeIndex:P.default.controlMode,isShowUpload:!0,isActivated:!1,isGenerating:!1,isSkipped:!1,progressTimer:null,generateTaskId:"",generateProgress:0,generateImageList:[],generateCarouselIndex:0,isShowCarousel:!1}},showViewer:!1,preViewImgList:[],preViewImgIndex:0,ctx:null,isDrawing:!1,lastX:0,lastY:0,isShowBrushSize:!1,brushSize:20,drawHistory:[],mask:null,dialogVisible:!1,activeDialogTab:"2",dialogModeConfig:{modeCustomized:"",modeCheckPoint:"",modePrompt:{style_name:"",prompt_text:"",negative_prompt_text:""}},isUploadLoading:!1,isEnableCustomized:!1,isCreateCustomized:!1,isCreateModeCheckPoint:!1,isCreatePrompt:!1,modeChoicePromptOptions:[],modeChoiceCheckPointOptions:[],modeChoiceCustomizedOptions:[],modeGenerateTypeOptions:P.generateType,modeVariationsOptions:8,modeChoiceMethodOptions:P.samplerMethods,modeChoiceResolutionOptions:P.resolution}},mounted(){this.getSDModels(),this.getLoRAs(),this.getPromptPresuppose()},watch:{"modeSetting.generateType":{handler(e,t){t!==e&&(this.uploadImageUrl="",this.generateData[t].isActivated=!1,this.generateData[e].isActivated=!0,"inpaint"===t&&this.handleClearInpaint())}}},computed:{isShowDialogCustomizedDeleteBtn(){return""!==this.dialogModeConfig.modeCustomized},isShowDialogCheckPointDeleteBtn(){return""!==this.dialogModeConfig.modeCheckPoint},isUseSketch(){return"txt2img"===this.modeSetting.generateType},isUseInpaint(){return"inpaint"===this.modeSetting.generateType},isUseRendering(){return"img2img"===this.modeSetting.generateType},isThisTypeGenerating(){return this.generateData[this.modeSetting.generateType].isGenerating}},methods:{handleGenerate(){if(""===this.modeSetting.prompt)return void this.$message.error("Failed to generate: No prompt submitted.");let e=this.handlePrepareGeneralConfig();console.log("config:",e),this.isUseSketch?this.handleTxt2img(e):this.isUseInpaint?this.handleInpaint(e):this.isUseRendering&&this.handleImg2img(e),this.handleGetProgress()},handlePrepareGeneralConfig(){let e=this.modeSetting.generateType,t=this.generateData[e],a=this.modeSetting.resolution,i=this.modeChoiceResolutionOptions,s=i[i.findIndex((e=>e.label===a))],n=P.default.negativePrompt,o=this.choicePromptStyle;""!==o.style_name&&""!==o.negative_prompt_text&&(n=o.negative_prompt_text),this.generateData[e].generateTaskId=I();let r={sd_model_checkpoint:this.modeSetting.mode,id_task:this.generateData[e].generateTaskId,width:s.value.width,height:s.value.height,prompt:this.modeSetting.prompt,negative_prompt:n,batch_size:this.modeSetting.batchSize,sampler_index:this.modeSetting.samplerMethod,n_iter:1,seed:-1,steps:20,resize_mode:3,alwayson_scripts:{}};return this.isUseInpaint||""!==t.uploadImageUrl&&(r.alwayson_scripts={controlnet:{args:[{enabled:!0,input_image:t.uploadImageUrl,control_mode:this.identifyControlMode(t.controlModeIndex),module:this.isUseSketch?P.default.sketchModule:P.default.renderingModule,model:this.isUseSketch?P.default.sketchModel:P.default.renderingModel,mask:null,lowvram:"false",pixel_perfect:"false",weight:1,resize_mode:1,processor_res:512,threshold_a:100,threshold_b:200,guidance:1,guidance_start:0,guidance_end:1}]}}),r},handleTxt2img(e){this.$message.success("Please wait a moment to start generating pictures."),this.generateData.txt2img.isGenerating=!0,p(e).then((e=>{if(this.generateData.txt2img.isSkipped)return this.generateData.txt2img.isSkipped=!1,void this.$message.warning("The task has been skipped");let t=e.images;this.generateData.txt2img.generateImageList=[],t.forEach((e=>{this.generateData.txt2img.generateImageList.push({imgUrl:"data:image/png;base64,"+e})})),this.generateData.txt2img.generateProgress=100,this.generateData.txt2img.isShowCarousel&&this.handleCloseCarousel("txt2img")})).catch((e=>{console.error(e)})).finally((()=>{this.generateData.txt2img.isGenerating=!1}))},handleInpaint(e){let t=document.getElementById("canvas"),a=document.getElementById("image");e.denoising_strength=this.generateData.inpaint.repaintStrength,this.convertCanvasBackground(t,a.src).then((t=>{e.mask=t,e.mask_blur=4,e.inpainting_fill=1,e.inpaint_full_res_padding=32,e.inpainting_mask_invert=0,e.inpaint_full_res=!1,this.handleImg2img(e)}))},handleImg2img(e){let t=this.modeSetting.generateType,a=this.generateData[t].uploadImageUrl;""!==a?(this.$message.success("Please wait a moment to start generating pictures."),e.init_images=[a],e.resize_mode=0,this.generateData[t].isGenerating=!0,u(e).then((e=>{if(this.generateData[t].isSkipped)return this.generateData[t].isSkipped=!1,void this.$message.warning("The task has been skipped");let a=e.images;this.generateData[t].generateImageList=[],a.forEach((e=>{this.generateData[t].generateImageList.push({imgUrl:"data:image/png;base64,"+e})})),this.generateData[t].isShowCarousel&&this.handleCloseCarousel(t),this.generateData[t].generateProgress=100})).catch((e=>{console.error(e)})).finally((()=>{this.generateData[t].isGenerating=!1}))):this.$message.error("Please prepare a picture first")},handleInterruptGenerate(){f().then((e=>{this.$message.warning("The task has been stopped")})).catch((e=>{console.error(e)}))},handleSkipGenerate(){v().then((e=>{let t=this.modeSetting.generateType;this.generateData[t].isSkipped=!0})).catch((e=>{console.error(e)}))},handleGetProgress(){let e=this.modeSetting.generateType;this.generateData[e].generateProgress=0,this.generateData[e].progressTimer=setInterval((()=>{this.generateData[e].isGenerating?this.getProgress(e):clearInterval(this.generateData[e].progressTimer)}),1e3)},identifyControlMode(e){return-1===e?1:1===e?2:0},getSDModels(){w().then((e=>{this.modeChoiceCheckPointOptions=e})).catch((e=>{console.error(e)}))},getLoRAs(){x().then((e=>{this.modeChoiceCustomizedOptions=e})).catch((e=>{console.error(e)}))},getPromptPresuppose(){S().then((e=>{e.success&&e.data.StyleList&&e.data.StyleList.length>0?this.modeChoicePromptOptions=e.data.StyleList.map((e=>({...e,isDisabled:!0}))):console.log("%c [ StyleList is [] ]-603","font-size:13px; background:pink; color:#bf2c9f;",e.data.StyleList)})).catch((e=>{console.error(e)}))},getProgress(e){C({id_task:this.generateData[e].generateTaskId,id_live_preview:-1}).then((t=>{const{active:a,progress:i,completed:s}=t;if(a){let t=this.generateData[e].generateProgress,a=Number((100*i).toFixed(2));a>t&&(this.generateData[e].generateProgress=a)}else this.generateData[e].generateProgress=s?99:0})).catch((t=>{this.generateData[e].isGenerating=!1,console.log("[ err ] >",t)}))},addStyle(e){k(e).then((e=>{e.success?(this.modeChoicePromptOptions.push({...e.data,isDisabled:!0}),this.$message.success("Successfully Saved!")):this.$message({type:"error",message:"Save failure!"})})).catch((e=>{console.log(e)}))},handleRefreshMode(e){e&&b().then((e=>{this.getSDModels()})).catch((e=>{console.log(e)}))},handleChangeGenerateType(e){this.modeSetting.generateType=e},handleChangeCustomizedStyle(e){const t=new RegExp("<lora:"+e+":(\\d+.\\d+|\\d+)>","g");let a=this.modeSetting.prompt;const i=t.exec(a);this.modeSetting.prompt=i?a.replace(t,""):`${a}<lora:${e}:1>`},handleChangePresupposePrompt(e){let t=this.modeChoicePromptOptions.find((t=>t.style_name===e));this.choicePromptStyle=Object.assign({},t),this.modeSetting.prompt=t.prompt_text},isRepeatPromptStyleName(e){return this.modeChoicePromptOptions.some((t=>t.style_name===e))},handleSavePresuppose(){let e=this.modeSetting.prompt;0===e.length?this.$message.error("Please enter the prompt"):this.$prompt("Please enter a prompt style name","tip",{confirmButtonText:"confirm",cancelButtonText:"cancel",inputPattern:/^.+$/,inputErrorMessage:"The prompt style name is empty",customClass:"save-prompt-style-box"}).then((({value:t})=>{let a=this.isRepeatPromptStyleName(t);if(a)return void this.$message.error("The style name is repeated");let i={style_name:t,prompt_text:e,negative_prompt_text:""};this.addStyle(i)})).catch((()=>{this.$message({type:"warning",message:"Cancel Save!"})}))},beforeUpload(e){const t=e.size/1024/1024<5;return t||this.$message.error("The size of uploaded profile picture cannot exceed 5MB."),t},handleUpload(e){this.blobToBase64(e.file).then((e=>{let t=this.modeSetting.generateType;this.generateData[t].uploadImageUrl=e,this.generateData[t].isShowUpload=!1}))},blobToBase64(e){return new Promise(((t,a)=>{const i=new FileReader;i.onload=e=>{t(e.target.result)},i.readAsDataURL(e),i.onerror=()=>{a(new Error("blobToBase64 error"))}}))},handleImgOnload(){this.isUseInpaint&&this.initCanvas()},handleRefreshImage(){this.drawHistory.length>0&&this.ctx.putImageData(this.drawHistory.pop(),0,0)},handleCloseImage(e){this.generateData[e].uploadImageUrl="",this.generateData[e].isShowUpload=!0},handleClearInpaint(){let e=document.getElementById("canvas");this.ctx.clearRect(0,0,e.width,e.height),this.drawHistory=[],this.isShowBrushSize=!1},handleToggleBrushSize(){this.isShowBrushSize=!this.isShowBrushSize},initCanvas(){let e=document.getElementById("image"),t=document.getElementById("canvas"),a=this.$refs.brush;t.width=e.width,t.height=e.height,this.ctx=t.getContext("2d"),this.ctx.fillStyle="red",this.ctx.fill(),t.addEventListener("mouseenter",(()=>{a.style.display="block"})),t.addEventListener("mouseleave",(()=>{this.isDrawing=!1})),t.addEventListener("mousedown",(e=>{this.isDrawing=!0,[this.lastX,this.lastY]=[e.offsetX,e.offsetY];let t=document.getElementById("canvas"),a=this.ctx.getImageData(0,0,t.width,t.height);this.drawHistory.push(a)})),t.addEventListener("mouseup",(e=>{this.isDrawing=!1})),t.addEventListener("mousemove",(e=>{const i=e.clientX-t.getBoundingClientRect().left,s=e.clientY-t.getBoundingClientRect().top;a.style.left=`${i}px`,a.style.top=`${s}px`,this.isDrawing&&this.drawMask(e.offsetX,e.offsetY)}))},drawMask(e,t){this.ctx.beginPath(),this.ctx.moveTo(this.lastX,this.lastY),this.ctx.lineTo(e,t),this.ctx.strokeStyle="rgba(0, 0, 0, 1)",this.ctx.lineWidth=this.brushSize,this.ctx.lineCap="round",this.ctx.stroke(),[this.lastX,this.lastY]=[e,t]},convertCanvasBackground(e,t){return new Promise((async a=>{const i=e,s=i.getContext("2d"),n=s.getImageData(0,0,i.clientWidth,i.clientHeight),o=n.data;for(let e=0;e<o.length;e+=4)o[e+3]<128?(o[e]=0,o[e+1]=0,o[e+2]=0,o[e+3]=255):(o[e]=255,o[e+1]=255,o[e+2]=255,o[e+3]=255);const r=document.createElement("canvas");r.width=i.clientWidth,r.height=i.clientHeight;const l=r.getContext("2d");l.putImageData(n,0,0);const c=await this.getImageOriginSize(t),d=await this.scaleImage(r.toDataURL(),c.width,c.height);a(d)}))},async getImageOriginSize(e){return new Promise((t=>{const a=new Image;a.src=e,a.onload=()=>{t({width:a.naturalWidth,height:a.naturalHeight})}}))},async scaleImage(e,t,a){return new Promise((i=>{const s=new Image;s.src=e,s.onload=()=>{const e=document.createElement("canvas");e.width=t,e.height=a;const n=e.getContext("2d");n.drawImage(s,0,0,t,a),i(e.toDataURL())}}))},handleClickGenerateImage(e,t){this.generateData[t].isShowCarousel=!0,this.generateData[t].generateCarouselIndex=e},handleCloseCarousel(e){this.generateData[e].isShowCarousel=!1,this.generateData[e].generateCarouselIndex=0},handleSentSave(){let e=this.modeSetting.generateType;if(0===this.generateData[e].generateImageList.length)return void this.$message.error("Please generate an image first");const{generateImageList:t,generateCarouselIndex:a}=this.generateData[e];let i=document.createElement("a");i.style.display="none",i.href=t[a].imgUrl,i.download="downloadImage.png",document.body.appendChild(i),i.click(),document.body.removeChild(i)},dataURL2Blob(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),s=i.length,n=new Uint8Array(s);while(s--)n[s]=i.charCodeAt(s);return new Blob([n],{type:a})},handleSentFaceliftOrRendering(e){let t=this.modeSetting.generateType;if(t===e)return;if(0===this.generateData[t].generateImageList.length)return void this.$message.error("Please generate an image first");const{generateImageList:a,generateCarouselIndex:i}=this.generateData[t];this.modeSetting.generateType=e,this.$nextTick((()=>{this.generateData[e].uploadImageUrl=a[i].imgUrl,this.generateData[e].isShowUpload=!1}))},handlePreViewImg(e){let t=this.modeSetting.generateType,a=this.generateData[t].generateImageList;this.preViewImgList=a.map((e=>e.imgUrl)),this.preViewImgIndex=e,this.showViewer=!0},closeViewer(){this.showViewer=!1},handleCloseDialog(e){e(),this.activeDialogTab="2",this.isCreateCustomized=!1,this.isCreateModeCheckPoint=!1,this.isCreatePrompt=!1},handleToggleEnableCustomized(){this.isEnableCustomized=!this.isEnableCustomized,this.isEnableCustomized||(this.dialogModeConfig.modeCustomized="")},handleSelectCustomized(e){this.dialogModeConfig.modeCustomized=e},handleCreateCustomized(){let e=this.dialogModeConfig.modeCustomized;this.modeChoiceCustomizedOptions.push({name:e}),this.dialogModeConfig.modeCustomized=""},handleDeleteCustomized(){if(!this.isEnableCustomized)return;let e=this.modeChoiceCustomizedOptions.findIndex((e=>e.name===this.dialogModeConfig.modeCustomized));-1!==e?(this.modeChoiceCustomizedOptions.splice(e,1),this.dialogModeConfig.modeCustomized=""):this.$message.error("Please refresh and try again")},handleUploadCustomizedStyle(e){this.isUploadLoading=!0;let t=new FormData;t.append("file",e.file),y(t).then((e=>{this.$message.success(`Upload successful, file name is${e.networks[0].name}`),this.getLoRAs()})).catch((e=>{this.$message.error("Upload failed"),console.error(e)})).finally((()=>{this.isUploadLoading=!1}))},handleSelectCheckPoint(e){this.dialogModeConfig.modeCheckPoint=e},handleCreateModeCheckPoint(){let e=this.dialogModeConfig.modeCheckPoint;this.modeChoiceCheckPointOptions.push({title:e}),this.dialogModeConfig.modeCheckPoint=""},handleDeleteCheckPoint(){let e=this.modeChoiceCheckPointOptions.findIndex((e=>e.title===this.dialogModeConfig.modeCheckPoint));-1!==e?(this.modeChoiceCheckPointOptions.splice(e,1),this.dialogModeConfig.modeCheckPoint=""):this.$message.error("Please refresh and try again")},handleDeletePrompt(e){e>=0&&e<this.modeChoicePromptOptions.length?D({style_id:this.modeChoicePromptOptions[e].id}).then((t=>{t.success&&(this.modeChoicePromptOptions.splice(e,1),this.$message.success("Successfully deleted"))})).catch((e=>{console.log(e)})):this.$message.error("Please refresh and try again")},handleEditPrompt(e){let t=this.modeChoicePromptOptions[e].isDisabled;this.modeChoicePromptOptions[e].isDisabled=!t,t?this.$message.success("Please modify your prompt"):this.$message.warning("Stop modifying prompt")},handleSubmitEditPrompt(e,t){const{isDisabled:a,...i}=e;_(i).then((()=>{this.$message.success("Successfully edited")})).catch((e=>{console.log(e)})),this.modeChoicePromptOptions[t].isDisabled=!0},handleCancelCreatePrompt(){this.dialogModeConfig.modePrompt={style_name:"",prompt_text:"",negative_prompt_text:""},this.isCreatePrompt=!1},handleCreatePrompt(){this.isCreatePrompt||(this.isCreatePrompt=!0,this.$nextTick((()=>{let e=document.getElementsByClassName("setting-prompt-container")[0];e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})))},handleSavePrompt(){let e=this.dialogModeConfig.modePrompt;if(""!==e.style_name){let t=this.isRepeatPromptStyleName(e.style_name);if(t)return void this.$message.error("The style name is repeated");this.addStyle(e),this.handleCancelCreatePrompt()}else this.$message.error("The default name is not filled in, please supplement!")}}},U=M,z=a(1001),T=(0,z.Z)(U,o,r,!1,null,"7afb6a54",null),L=T.exports,E=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-test"},[t("div",{staticClass:"img-container"},[t("canvas",{attrs:{id:"canvas"}}),t("img",{staticClass:"img-test",attrs:{src:"https://image.civitai.com/xG1nkqKTMzGDvpLrqFT7WA/2760256c-ab27-468c-adda-9be2f775d669/width=450/00108-2893884387-,%20(((best%20quality,%20masterpiece))),%20faruzan_genshin,%20((cowboy%20shot)),%20aqua%20hair,%20long%20hair,%20twin%20tails,%20x%20hair%20ornament,%20jewelry,.jpeg",alt:"",id:"image"},on:{load:e.initCanvas}}),t("div",{ref:"brush",staticClass:"brush-circle",style:{width:`${e.brushSize}px`,height:`${e.brushSize}px`}})]),t("ul",{staticClass:"menu"},[t("li",{on:{click:function(t){e.brushSize+=10}}},[e._v("画笔大小")]),t("li",{on:{click:e.withdraw}},[e._v("回退")]),t("li",{on:{click:e.clearMask}},[e._v("清空")]),t("li",{on:{click:e.getMask}},[e._v("获取Mask")])])])},O=[],$={components:{},props:[],data(){return{ctx:null,lastX:0,lastY:0,brushSize:40,drawHistory:[]}},methods:{initCanvas(){let e=document.getElementById("canvas"),t=document.getElementById("image"),a=this.$refs.brush;e.width=t.width,e.height=t.height,this.ctx=e.getContext("2d"),this.ctx.fillStyle="red",this.ctx.fill();let i=!1;e.addEventListener("mouseenter",(()=>{a.style.display="block"})),e.addEventListener("mouseleave",(()=>{i=!1})),e.addEventListener("mousedown",(e=>{i=!0,[this.lastX,this.lastY]=[e.offsetX,e.offsetY];let t=document.getElementById("canvas"),a=this.ctx.getImageData(0,0,t.width,t.height);this.drawHistory.push(a)})),e.addEventListener("mousemove",(t=>{const s=t.clientX-e.getBoundingClientRect().left,n=t.clientY-e.getBoundingClientRect().top;a.style.left=`${s}px`,a.style.top=`${n}px`,i&&this.drawMask(t.offsetX,t.offsetY)})),e.addEventListener("mouseup",(e=>{i=!1}))},drawMask(e,t){this.ctx.beginPath(),this.ctx.moveTo(this.lastX,this.lastY),this.ctx.lineTo(e,t),this.ctx.strokeStyle="yellow",this.ctx.lineWidth=this.brushSize,this.ctx.lineCap="round",this.ctx.stroke(),[this.lastX,this.lastY]=[e,t]},clearMask(){let e=document.getElementById("canvas");this.ctx.clearRect(0,0,e.width,e.height)},withdraw(){this.drawHistory.length>0&&this.ctx.putImageData(this.drawHistory.pop(),0,0)},convertCanvasBackground(e,t){return new Promise((async a=>{const i=e,s=i.getContext("2d"),n=s.getImageData(0,0,i.clientWidth,i.clientHeight),o=n.data;for(let e=0;e<o.length;e+=4)o[e+3]<128?(o[e]=0,o[e+1]=0,o[e+2]=0,o[e+3]=255):(o[e]=255,o[e+1]=255,o[e+2]=255,o[e+3]=255);const r=document.createElement("canvas");r.width=i.clientWidth,r.height=i.clientHeight;const l=r.getContext("2d");l.putImageData(n,0,0);const c=await this.getImageOriginSize(t),d=await this.scaleImage(r.toDataURL(),c.width,c.height);a(d)}))},async getImageOriginSize(e){return new Promise((t=>{const a=new Image;a.src=e,a.onload=()=>{t({width:a.naturalWidth,height:a.naturalHeight})}}))},async scaleImage(e,t,a){return new Promise((i=>{const s=new Image;s.src=e,s.onload=()=>{const e=document.createElement("canvas");e.width=t,e.height=a;const n=e.getContext("2d");n.drawImage(s,0,0,t,a),i(e.toDataURL())}}))},getMask(){let e=document.getElementById("canvas"),t=document.getElementById("image");this.convertCanvasBackground(e,t.src).then((e=>{console.log("[ mask ] >",e)}))}},computed:{},watch:{},created(){},mounted(){}},R=$,G=(0,z.Z)(R,E,O,!1,null,null,null),B=G.exports,V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"parent"},[e._l(e.pictrueList,(function(a,i){return t("div",{key:i,staticClass:"pictrueList_pic"},[t("img",{attrs:{src:a.picUrl},on:{dblclick:function(t){return e.preViewImg(i,e.pictrueList)}}})])})),e.showViewer?t("el-image-viewer",{attrs:{"url-list":e.srcList,initialIndex:e.initialIndex,"on-close":e.closeViewer}}):e._e()],2)},j=[],N={components:{ElImageViewer:l.Z},data(){return{showViewer:!1,srcList:[],initialIndex:0,pictrueList:[{picUrl:"https://file.iviewui.com/images/image-demo-10.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-11.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-12.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-13.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-14.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-15.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-16.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-17.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-18.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-19.jpg"},{picUrl:"https://file.iviewui.com/images/image-demo-20.jpg"}]}},methods:{preViewImg(e,t){console.log("[ 111 ] >",111),this.srcList=t.map((e=>e.picUrl)),this.initialIndex=e,this.showViewer=!0},closeViewer(){this.showViewer=!1}}},A=N,F=(0,z.Z)(A,V,j,!1,null,null,null),H=F.exports,q={name:"App",components:{HomeView:L,TetPlugin:B,TestImageViewer:H}},K=q,X=(0,z.Z)(K,s,n,!1,null,null,null),Y=X.exports,Z=a(408);i["default"].use(Z.ZP);var W=new Z.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),J=a(8388),Q=a(7877);a(387);i["default"].config.productionTip=!1,i["default"].use(m()),i["default"].use(J.ZP),i["default"].use(Q.Z),new i["default"]({store:W,render:e=>e(Y)}).$mount("#app")},4666:function(e,t,a){e.exports=a.p+"static/img/clear.3649f188.svg"},815:function(e,t,a){e.exports=a.p+"static/img/pencel.dac978a7.svg"},7181:function(e,t,a){e.exports=a.p+"static/img/save.4caeae2e.svg"},4427:function(e,t,a){e.exports=a.p+"static/img/logo.c4216399.png"},9647:function(e,t,a){e.exports=a.p+"static/img/user_avatar.af9c84c5.png"},1552:function(e){e.exports=JSON.parse('{"generateType":[{"label":"Sketch","value":"txt2img"},{"label":"Facelift","value":"inpaint"},{"label":"Rendering","value":"img2img"}],"checkPoint":[{"title":"Car Exterior [暂无模型]"},{"title":"Car Interior [暂无模型]"},{"title":"Component Product [暂无模型]"}],"loRAs":[{"name":"Sketch rendering_Tallis"},{"name":"Light color sketch rendering"},{"name":"Realistic rendering style"}],"batchSize":[{"label":1},{"label":2},{"label":3},{"label":4},{"label":5},{"label":6},{"label":7},{"label":8}],"samplerMethods":[{"label":"DPM++ 2M Karras","labelSuffix":"(recommanded)","value":"DPM++ 2M Karras"},{"label":"DPM++ 2S a Karras","value":"DPM++ 2S a Karras"},{"label":"DPM++ SDE Karras","value":"DPM++ SDE Karras"},{"label":"DPM++ 2S a","value":"DPM++ 2S a"},{"label":"DPM++ 2M","value":"DPM++ 2M"},{"label":"DPM++ SDE","value":"DPM++ SDE"},{"label":"DPM fast","value":"DPM fast"},{"label":"DPM adaptive","value":"DPM adaptive"},{"label":"DPM2 Karras","value":"DPM2 Karras"},{"label":"DPM2 a","value":"DPM2 a"},{"label":"DPM2","value":"DPM2"},{"label":"DPM2 a Karras","value":"DPM2 a Karras"},{"label":"Euler a","value":"Euler a"},{"label":"Euler","value":"Euler"},{"label":"Heun","value":"Heun"},{"label":"LMS","value":"LMS"},{"label":"LMS Karras","value":"LMS Karras"},{"label":"DDIM","value":"DDIM"},{"label":"PLMS","value":"PLMS"},{"label":"UniPC","value":"UniPC"}],"resolution":[{"label":"512 × 512","value":{"width":512,"height":512}},{"label":"960 × 540","value":{"width":960,"height":540}},{"label":"1280 × 720","value":{"width":1280,"height":720}}],"presetData":{"Style":[{"style_name":"Roaster","prompt_text":"Photography of a sport car in red shinny carpaint parking in the studio with concrete wall background,the window shield is dark black with reflection,strong surfacing with sharp feature,extremely details,(modem luxury style), front three quarter view,light coming from the left,4K high quality","negative_prompt_text":"interior,colorful,melt shape,melt wheels,missing wheels,grill,wrong perspective,blur,dots,wrong proportion,scratch,floating car,water mark,unsymmetrical"},{"style_name":"SUV","prompt_text":"Photography of a SUV in red shinny carpaint parking in the studio with concrete wall background,the window shield is dark black with reflection,strong surfacing with sharp feature,extremely details,(modemn luxury style), front three quarter view,light coming from the left,4K high quality","negative_prompt_text":"interior,colorful,melt shape,melt wheels,missing wheels,grill,wrong perspective,blur,dots,wrong proportion,scratch,floating car,water mark,unsymmetrical"},{"style_name":"Sedan","prompt_text":"Photography of a SUV in red shinny carpaint parking in the studio with concrete wall background,the window shield is dark black with reflection,strong surfacing with sharp feature,extremely details,(modemn luxury style), front three quarter view,light coming from the left,4K high quality","negative_prompt_text":"interior,colorful,melt shape,melt wheels,missing wheels,grill,wrong perspective,blur,dots,wrong proportion,scratch,floating car,water mark,unsymmetrical"}]},"default":{"mode":"","generateType":"txt2img","prompt":"","batchSize":1,"customizedStyle":"","controlMode":0,"denoisingStrength":0.75,"samplerMethod":"DPM++ 2M Karras","resolution":"960 × 540","negativePrompt":"nsfw, lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry","sketchModule":"lineart_standard","renderingModule":"canny","sketchModel":"control_v11p_sd15_lineart [43d4be0d]","renderingModel":"control_v11p_sd15_canny [d14c016b]"}}')}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,s,n){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],n=e[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p=""}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,o=i[0],r=i[1],l=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(t&&t(i);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},i=self["webpackChunkstablediffuison_web_demo"]=self["webpackChunkstablediffuison_web_demo"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(422)}));i=a.O(i)})();